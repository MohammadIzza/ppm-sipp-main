<html lang="en">
    <!--begin::Head-->
    <head>
        <!-- Google Tag Manager -->
        <!--<script>(function(w, d, s, l, i){w[l] = w[l] || []; w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'}); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer'?'&amp;l=' + l:''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-5FS8GGP');</script>-->
        <!-- End Google Tag Manager -->
        <meta charset="utf-8" />
        <title>PPM-Apps FSM</title>
        <meta name="description" content="Updates and statistics" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <!--begin::Fonts-->
        <link href=<?php echo base_url() . "dist/assets/css/font.css" ?> rel="stylesheet" type="text/css" />
        <!--end::Fonts-->
        <!--begin::Page Vendors Styles(used by this page)-->
        <link href=<?php echo base_url() . "dist/assets/plugins/custom/datatables/datatables.bundle.css" ?> rel="stylesheet" type="text/css" />
        <!--end::Page Vendors Styles-->
        <!--begin::Global Theme Styles(used by all pages)-->
        <link href=<?php echo base_url() . "dist/assets/plugins/global/plugins.bundle.css?v=7.2.8" ?> rel="stylesheet" type="text/css" />
        <link href=<?php echo base_url() . "dist/assets/plugins/custom/prismjs/prismjs.bundle.css?v=7.2.8" ?> rel="stylesheet" type="text/css" />
        <link href=<?php echo base_url() . "dist/assets/css/style.bundle.css?v=7.2.8" ?> rel="stylesheet" type="text/css" />
        <!--end::Global Theme Styles-->
        <!--begin::Layout Themes(used by all pages)-->
        <!--end::Layout Themes-->
        <link rel="shortcut icon" href=<?php echo base_url() . "images/favicon-undip.ico" ?> />
        <!-- Hotjar Tracking Code for keenthemes.com -->
        <!--<script>(function(h, o, t, j, a, r){ h.hj = h.hj || function(){(h.hj.q = h.hj.q || []).push(arguments)}; h._hjSettings = {hjid:1070954, hjsv:6}; a = o.getElementsByTagName('head')[0]; r = o.createElement('script'); r.async = 1; r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv; a.appendChild(r); })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');</script>-->
        <style>
            input[type="file"] {
                display: none;
            }
            .bigdrop {
                width: 800px !important;
            }
        </style>
    </head>
    <!--end::Head-->
    <!--begin::Body-->
    <body id="kt_body" style="background-image: url(<?php echo base_url() . 'dist/assets/media/bg/bg-10.jpg' ?>)" class="page-loading-enabled page-loading quick-panel-right demo-panel-right offcanvas-right header-static subheader-enabled aside-enabled aside-static page-loading">
        <!-- Google Tag Manager (noscript) -->
        <!--        <noscript>
                <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5FS8GGP" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                </noscript>-->
        <!-- End Google Tag Manager (noscript) -->
        <?php include 'loader.php'; ?>
        <!--begin::Main-->
        <!--begin::Header Mobile-->
        <div id="kt_header_mobile" class="header-mobile">
            <!--begin::Logo-->
            <a href="index.html">
                <img alt="Logo" src=<?php echo base_url() . "images/logo-fsm.png" ?> class="logo-default max-h-30px" />
            </a>
            <!--end::Logo-->
            <!--begin::Toolbar-->
            <div class="d-flex align-items-center">
                <button class="btn p-0 burger-icon burger-icon-left" id="kt_aside_mobile_toggle">
                    <span></span>
                </button>
                <button class="btn p-0 burger-icon burger-icon-left ml-4" id="kt_header_mobile_toggle">
                    <span></span>
                </button>
                <button class="btn btn-icon btn-hover-transparent-white p-0 ml-3" id="kt_header_mobile_topbar_toggle">
                    <span class="svg-icon svg-icon-xl">
                        <!--begin::Svg Icon | path:assets/media/svg/icons/General/User.svg-->
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <polygon points="0 0 24 0 24 24 0 24" />
                        <path d="M12,11 C9.790861,11 8,9.209139 8,7 C8,4.790861 9.790861,3 12,3 C14.209139,3 16,4.790861 16,7 C16,9.209139 14.209139,11 12,11 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                        <path d="M3.00065168,20.1992055 C3.38825852,15.4265159 7.26191235,13 11.9833413,13 C16.7712164,13 20.7048837,15.2931929 20.9979143,20.2 C21.0095879,20.3954741 20.9979143,21 20.2466999,21 C16.541124,21 11.0347247,21 3.72750223,21 C3.47671215,21 2.97953825,20.45918 3.00065168,20.1992055 Z" fill="#000000" fill-rule="nonzero" />
                        </g>
                        </svg>
                        <!--end::Svg Icon-->
                    </span>
                </button>
            </div>
            <!--end::Toolbar-->
        </div>
        <!--end::Header Mobile-->
        <div class="d-flex flex-column flex-root">
            <!--begin::Page-->
            <div class="d-flex flex-row flex-column-fluid page">
                <!--begin::Wrapper-->
                <div class="d-flex flex-column flex-row-fluid wrapper" id="kt_wrapper">
                    <?php include('v_header.php'); ?>
                    <!--begin::Content-->
                    <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
                        <!--begin::Subheader-->
                        <div class="subheader py-2 py-lg-12 subheader-transparent" id="kt_subheader">
                            <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
                                <!--begin::Info-->
                                <div class="d-flex align-items-center flex-wrap mr-1">
                                    <!--begin::Heading-->
                                    <div class="d-flex flex-column">
                                        <!--begin::Title-->
                                        <h2 class="text-white font-weight-bold my-2 mr-5">Penelitian & Pengabdian</h2>
                                        <!--end::Title-->
                                        <!--begin::Breadcrumb-->
                                        <div class="d-flex align-items-center font-weight-bold my-2">
                                            <!--begin::Item-->
                                            <a href="<?php echo base_url() . "index.php"; ?>" class="opacity-75 hover-opacity-100">
                                                <i class="flaticon2-shelter text-white icon-1x"></i>
                                            </a>
                                            <!--end::Item-->
                                            <!--begin::Item-->
                                            <span class="label label-dot label-sm bg-white opacity-75 mx-3"></span>
                                            <a href="" class="text-white text-hover-white opacity-75 hover-opacity-100">File Upload</a>
                                            <!--end::Item-->
                                            <!--begin::Item-->
                                            <span class="label label-dot label-sm bg-white opacity-75 mx-3"></span>
                                            <a href="<?php echo base_url() . "index.php/c_admin_luaran"; ?>" class="text-white text-hover-white opacity-75 hover-opacity-100">Luaran</a>
                                            <!--end::Item-->
                                        </div>
                                        <!--end::Breadcrumb-->
                                    </div>
                                    <!--end::Heading-->
                                </div>
                                <!--end::Info-->
                                <!--begin::Toolbar-->
                                <?php include 'v_toolbar_breadcrumb.php'; ?>
                                <!--end::Toolbar-->
                            </div>
                        </div>
                        <!--end::Subheader-->

                        <!--begin::Entry-->
                        <div class="d-flex flex-column-fluid">
                            <!--begin::Container-->
                            <div class="container-fluid">
                                <div class="d-lg-flex flex-row-fluid">
                                    <?php include 'v_asidemenu.php'; ?>
                                    <div class="content-wrapper flex-row-fluid">
                                        <!--begin::Dashboard-->
                                        <!--begin::Row-->
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <!--begin::Card-->
                                                <div class="card card-custom">
                                                    <div class="card-header flex-wrap border-0 pt-6 pb-0">
                                                        <div class="card-title">
                                                            <h3 class="card-label">Luaran Penelitian/Pengabdian
                                                                <span class="d-block text-muted pt-2 font-size-sm">Daftar Luaran Hasil Penelitian/Pengabdian saya</span></h3>
                                                        </div>
                                                        <div class="card-toolbar">
                                                           <!--begin::Button-->
                                                            <a href="javascript:;" class="btn btn-primary font-weight-bolder luaranbaru" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Klik untuk menambahkan luaran">
                                                                <span class="svg-icon svg-icon-md"><!--begin::Svg Icon | path:C:\wamp64\www\keenthemes\legacy\metronic\theme\html\demo2\dist/../src/media/svg/icons\Code\Plus.svg--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                    <rect x="0" y="0" width="24" height="24"/>
                                                                    <circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10"/>
                                                                    <path d="M11,11 L11,7 C11,6.44771525 11.4477153,6 12,6 C12.5522847,6 13,6.44771525 13,7 L13,11 L17,11 C17.5522847,11 18,11.4477153 18,12 C18,12.5522847 17.5522847,13 17,13 L13,13 L13,17 C13,17.5522847 12.5522847,18 12,18 C11.4477153,18 11,17.5522847 11,17 L11,13 L7,13 C6.44771525,13 6,12.5522847 6,12 C6,11.4477153 6.44771525,11 7,11 L11,11 Z" fill="#000000"/>
                                                                    </g>
                                                                    </svg><!--end::Svg Icon--></span>
                                                                Tambah Luaran</a>
                                                            <!--end::Button-->
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <!--begin: Search Form-->
                                                        <div class="mb-7">
                                                            <div class="row align-items-center">
                                                                <div class="col-lg-12 col-xl-10">
                                                                    <div class="row align-items-center">
                                                                        <div class="col-md-4 my-2 my-md-0">
                                                                            <div class="d-flex align-items-center">
                                                                                <label class="mr-3 mb-0 d-none d-md-block">Periode:</label>
                                                                                <select class="form-control" id="kt_datatable_search_periode">
                                                                                    <option value="">Semua Periode</option>
                                                                                    <?php foreach($periode as $data): ?>
                                                                                        <option value="<?php echo $data->idperiode; ?>" <?php if(isset($_SESSION['periode-uplu'])&& $_SESSION['periode-uplu']==$data->idperiode){echo "selected"; }?>><?php echo $data->nama; ?></option>
                                                                                    <?php endforeach; ?>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-5 my-2 my-md-0">
                                                                            <div class="d-flex align-items-center">
                                                                                <label class="mr-3 mb-0 d-none d-md-block">Luaran:</label>
                                                                                <select class="form-control" id="kt_datatable_search_jenis">
                                                                                    <option value="">Semua Jenis Luaran</option>
                                                                                    <?php foreach($jenisfile as $data): ?>
                                                                                        <option value="<?php echo $data->idjenis; ?>" <?php if(isset($_SESSION['jenis-uplu'])&& $_SESSION['jenis-uplu']==$data->idjenis){echo "selected"; }?>><?php echo $data->namafile; ?></option>
                                                                                    <?php endforeach; ?>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--end: Search Form-->
                                                        <!--begin: Datatable-->
                                                        <table class="table table-bordered table-hover table-checkable" id="kt_datatable" style="margin-top: 13px !important">
                                                        <!--<table class="datatable datatable-bordered datatable-head-custom" id="kt_datatable">-->
                                                            <thead>
                                                                <tr>
                                                                    <th title="Field #1">No</th>                                                                    
                                                                    <th title="Field #2">Peneliti</th>
                                                                    <th title="Field #3">Judul</th>
                                                                    <th title="Field #4">Luaran</th>
                                                                    <th title="Field #5">Keterangan</th>
                                                                    <th title="Field #6">Periode</th>
                                                                    <th title="Field #7">Dokumen</th>
                                                                    <th title="Field #8">Aksi</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <?php if($ppm != null){
                                                                        $i=1;
                                                                        foreach($ppm as $data):
                                                                ?>
                                                                <tr>
                                                                    <td class="text-center"><?php echo $i++; ?></td>                                                                    
                                                                    <td width="15%">
                                                                        <?php 
                                                                        echo "<ol style='padding-left: 15px'>";
                                                                        $query = $this->db->query("SELECT * from usulananggota, peneliti where usulananggota.nipnim=peneliti.nipnim and idusulan='$data->idusulan'");
                                                                        if ($query->num_rows() > 0) {
                                                                            foreach ($query->result() as $row) { 
                                                                                echo "<li>".$row->gelardepan." ".$row->namalengkap.", ".$row->gelarblkg."</li>";
                                                                             }                                                                             
                                                                        } 
                                                                        echo "</ol>";
                                                                        ?>
                                                                    </td>
                                                                    <td width="15%"><?php echo $data->judulluaran; ?></td>
                                                                    <td><?php echo $data->idjenis; ?></td>
                                                                    <td width="25%"><?php echo $data->keterangan; ?></td>
                                                                    <td><?php echo $data->idperiode; ?></td>
                                                                    <td class="text-center">
                                                                        <?php 
                                                                        if($data->fileloc != ""){ ?>
                                                                            <a href="<?php echo base_url().$data->fileloc; ?>" target="_blank" title="Klik untuk melihat dokumen" data-toggle="tooltip" >
                                                                                <img alt="" class="max-h-55px" src="<?php echo base_url() . 'dist/assets/media/svg/files/pdf.svg'?>"/>
                                                                            </a>
                                                                        <?php }else{ ?>
                                                                            <i class="fa la-file-pdf icon-4x" title="Luaran belum diunggah" data-toggle="tooltip" ></i>
                                                                        <?php } ?>
                                                                    </td>
                                                                    <td class="text-center" width="10%" nowrap="nowrap">
                                                                        <!--begin::Button-->
                                                                        <a href="javascript:;" class="btn btn-sm btn-warning btn-clean btn-icon item_edit" title="Edit Luaran" data-toggle="tooltip" id="idanggota" data="<?php echo $data->idfile;?>"><i class="la la-edit"></i></a>
                                                                        <a href="javascript:;" class="btn btn-sm btn-danger btn-clean btn-icon item_hapus" title="Hapus Luaran" data-toggle="tooltip" id="idanggota" data="<?php echo $data->idfile;?>"><i class="la la-trash"></i></a>
<!--                                                                        <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
                                                                            <div class="btn-group" role="group" aria-label="First group">
                                                                                <a href="javascript:;" class="btn btn-warning btn-icon item_edit" title="Edit Luaran" id="idanggota" data="<?php echo $data->idfile;?>"><i class="flaticon-edit"></i></a>
                                                                                <a href="javascript:;" class="btn btn-danger btn-icon item_hapus" title="Hapus Luaran" id="idanggota" data="<?php echo $data->idfile;?>"><i class="flaticon-delete"></i></a>
                                                                            </div>
                                                                        </div>-->
<!--                                                                        <center>
                                                                            <a href="javascript:;" class="btn btn-outline-warning item_edit" title="Edit Luaran" id="idanggota" data="<?php echo $data->idfile;?>">
                                                                                <i class="flaticon-edit"></i> Edit
                                                                            </a>
                                                                            <a href="javascript:;" class="btn btn-outline-danger item_hapus" title="Hapus Luaran" id="idanggota" data="<?php echo $data->idfile;?>">
                                                                                <i class="flaticon-delete"></i> Hapus
                                                                            </a>
                                                                        </center>-->
                                                                        <!--end::Button-->
                                                                    </td>
                                                                </tr>
                                                                <?php endforeach; } ?>
                                                            </tbody>
                                                        </table>
                                                        <!--end: Datatable-->
                                                    </div>
                                                </div>
                                                <!--end::Card-->
                                            </div>
                                        </div>
                                        <!--end::Row-->
                                        <!--end::Dashboard-->
                                        <!--begin::Modal Tambah Luaran-->
                                        <div id="Modalluaranbaru" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalSizeLg" aria-hidden="true" data-keyboard="false" data-backdrop="static">
                                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h4 class="modal-title">Tambah Luaran Penelitian/Pengabdian</h4>
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>                        
                                                    </div>
                                                    <form class="form-horizontal" method="post" id="formtambahluaran">
                                                        <div class="modal-body">
                                                            <div data-scroll="true" data-height="600">
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Kegiatan</b></label>
                                                                <select name="idusulan" class="form-control col-lg-5 select2" id="kt_select2_2" style="width: 450px" required="">
                                                                    <option value="">Pilih Judul Penelitian/Pengabdian &ensp;&ensp;</option>
                                                                    <?php 
                                                                    if ($usulan != null) {
                                                                    foreach ($usulan as $data) :
                                                                    ?>
                                                                        <option value="<?php echo $data->idusulan; ?>"><?php echo $data->judul; ?></option>
                                                                    <?php 
                                                                    endforeach; }
                                                                    ?>
                                                                </select>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Jenis Luaran</b></label>
                                                                <select name="idjenis" class="form-control col-lg-5" required="">
                                                                    <option value="">&ensp;&ensp; Pilih Jenis Luaran &ensp;&ensp;</option>
                                                                    <?php 
                                                                    if ($jenisfile != null) {
                                                                    foreach ($jenisfile as $data) :
                                                                    ?>
                                                                        <option value="<?php echo $data->idjenis; ?>"><?php echo $data->namafile; ?></option>
                                                                    <?php 
                                                                    endforeach; }
                                                                    ?>
                                                                </select>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Judul Luaran</b></label>
                                                                <textarea name="judulluaran" class="form-control col-lg-8" required="" rows="3" placeholder="Isikan Judul Luaran"></textarea>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Deskripsi Luaran</b></label>
                                                                <textarea name="keterangan" class="form-control col-lg-8" required="" rows="5" placeholder="Isikan keterangan lain Luaran Anda seperti kategori luaran, link artikel, ISSN/ISBN, penerbit, jumlah halaman, deskripsi singkat, atau lainnya"></textarea>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Unggah Dokumen</b></label>
                                                                <label class="btn btn-outline-success">
                                                                    <input type="file" name="file" id="file_baru"><i class="flaticon-upload"></i> Pilih File                                                                    
                                                                </label>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>File yang dipilih</b></label>
                                                                <label class="col-form-label text-left col-lg-8 col-sm-12 dropzone dropzone-default dropzone-success" id="display"></label>
                                                            </div>
                                                            <label class="col-form-label text-left col-lg-3 col-sm-12"></label>
                                                            Keterangan :
                                                            <br/><label class="col-form-label text-left col-lg-3 col-sm-12"></label>
                                                            <span class="svg-icon svg-icon-success">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                                    <polygon points="0 0 24 0 24 24 0 24" />
                                                                                    <path d="M12.2928955,6.70710318 C11.9023712,6.31657888 11.9023712,5.68341391 12.2928955,5.29288961 C12.6834198,4.90236532 13.3165848,4.90236532 13.7071091,5.29288961 L19.7071091,11.2928896 C20.085688,11.6714686 20.0989336,12.281055 19.7371564,12.675721 L14.2371564,18.675721 C13.863964,19.08284 13.2313966,19.1103429 12.8242777,18.7371505 C12.4171587,18.3639581 12.3896557,17.7313908 12.7628481,17.3242718 L17.6158645,12.0300721 L12.2928955,6.70710318 Z" fill="#000000" fill-rule="nonzero" />
                                                                                    <path d="M3.70710678,15.7071068 C3.31658249,16.0976311 2.68341751,16.0976311 2.29289322,15.7071068 C1.90236893,15.3165825 1.90236893,14.6834175 2.29289322,14.2928932 L8.29289322,8.29289322 C8.67147216,7.91431428 9.28105859,7.90106866 9.67572463,8.26284586 L15.6757246,13.7628459 C16.0828436,14.1360383 16.1103465,14.7686056 15.7371541,15.1757246 C15.3639617,15.5828436 14.7313944,15.6103465 14.3242754,15.2371541 L9.03007575,10.3841378 L3.70710678,15.7071068 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(9.000003, 11.999999) rotate(-270.000000) translate(-9.000003, -11.999999)" />
                                                                            </g>
                                                                    </svg>
                                                                    <!--end::Svg Icon-->
                                                            </span>
                                                            Jenis File PDF
                                                            <br/><label class="col-form-label text-left col-lg-3 col-sm-12"></label>
                                                            <span class="svg-icon svg-icon-success">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                                    <polygon points="0 0 24 0 24 24 0 24" />
                                                                                    <path d="M12.2928955,6.70710318 C11.9023712,6.31657888 11.9023712,5.68341391 12.2928955,5.29288961 C12.6834198,4.90236532 13.3165848,4.90236532 13.7071091,5.29288961 L19.7071091,11.2928896 C20.085688,11.6714686 20.0989336,12.281055 19.7371564,12.675721 L14.2371564,18.675721 C13.863964,19.08284 13.2313966,19.1103429 12.8242777,18.7371505 C12.4171587,18.3639581 12.3896557,17.7313908 12.7628481,17.3242718 L17.6158645,12.0300721 L12.2928955,6.70710318 Z" fill="#000000" fill-rule="nonzero" />
                                                                                    <path d="M3.70710678,15.7071068 C3.31658249,16.0976311 2.68341751,16.0976311 2.29289322,15.7071068 C1.90236893,15.3165825 1.90236893,14.6834175 2.29289322,14.2928932 L8.29289322,8.29289322 C8.67147216,7.91431428 9.28105859,7.90106866 9.67572463,8.26284586 L15.6757246,13.7628459 C16.0828436,14.1360383 16.1103465,14.7686056 15.7371541,15.1757246 C15.3639617,15.5828436 14.7313944,15.6103465 14.3242754,15.2371541 L9.03007575,10.3841378 L3.70710678,15.7071068 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(9.000003, 11.999999) rotate(-270.000000) translate(-9.000003, -11.999999)" />
                                                                            </g>
                                                                    </svg>
                                                                    <!--end::Svg Icon-->
                                                            </span>Ukuran File maksimum 5 Mb
                                                            <br/><br/>
                                                            <div class="modal-footer">
                                                                <input type="submit" value="Simpan" class="btn btn-primary" >
                                                                <!--<button type="button" class="btn btn-primary" data-dismiss="modal">Daftar</button>-->
                                                                <button type="button" class="btn btn-default" data-dismiss="modal" style="background-color:#ddd;">Tutup</button>
                                                            </div>
                                                            </div>
                                                        </div>
                                                    </form>    
                                                </div>
                                            </div>
                                        </div>
                                        <!--end::Modal Tambah Luaran-->
                                        
                                        <!--begin::Modal Edit Luaran-->
                                        <div id="Modaleditluaran" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalSizeLg" aria-hidden="true" data-keyboard="false" data-backdrop="static">
                                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h4 class="modal-title">Perbarui Luaran Penelitian/Pengabdian</h4>
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>                        
                                                    </div>
                                                    <!--<form class="form-horizontal" method="post" action="<?php // echo base_url();?>index.php/c_admin_luaran/editluaran">-->
                                                    <form class="form-horizontal" id="formueditluaran" method="post">
                                                        <div class="modal-body">
                                                            <div data-scroll="true" data-height="600">
                                                            <input name="idfile_edit" class="form-control" type="hidden">
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Kegiatan</b></label>
                                                                <select name="idusulan_edit" class="form-control col-lg-7"  required="">
                                                                    <option value="">Pilih Judul Penelitian/Pengabdian &ensp;&ensp;</option>
                                                                    <?php 
                                                                    if ($usulan != null) {
                                                                    foreach ($usulan as $data) :
                                                                    ?>
                                                                        <option value="<?php echo $data->idusulan; ?>"><?php echo $data->judul; ?></option>
                                                                    <?php 
                                                                    endforeach; }
                                                                    ?>
                                                                </select>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Jenis Luaran</b></label>
                                                                <select name="idjenis_edit" class="form-control col-lg-7" required="">
                                                                    <option value="">&ensp;&ensp; Pilih Jenis Luaran &ensp;&ensp;</option>
                                                                    <?php 
                                                                    if ($jenisfile != null) {
                                                                    foreach ($jenisfile as $data) :
                                                                    ?>
                                                                        <option value="<?php echo $data->idjenis; ?>"><?php echo $data->namafile; ?></option>
                                                                    <?php 
                                                                    endforeach; }
                                                                    ?>
                                                                </select>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Judul Luaran</b></label>
                                                                <textarea name="judulluaran_edit" class="form-control col-lg-8" required="" rows="3" placeholder="Isikan Judul Luaran"></textarea>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Deskripsi Luaran</b></label>
                                                                <textarea name="keterangan_edit" class="form-control col-lg-8" required="" rows="5" placeholder="Isikan keterangan lain Luaran Anda seperti kategori luaran, link artikel, ISSN/ISBN, penerbit, jumlah halaman, deskripsi singkat, atau lainnya"></textarea>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Dokumen Terunggah</b></label>
                                                                <input name="luaran_edit" class="form-control col-lg-8" type="text" disabled="">
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>Unggah Dokumen</b></label>
                                                                <label class="btn btn-outline-success">
                                                                    <input type="file" name="file_edit" id="file_edit"><i class="flaticon-upload"></i> Pilih File                                                               
                                                                </label>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-form-label text-left col-lg-3 col-sm-12"><b>File yang dipilih</b></label>
                                                                <label class="col-form-label text-left col-lg-8 col-sm-12 dropzone dropzone-default dropzone-success" id="display_edit"></label>
                                                                <input type="hidden" id="uploadedfile" name="uploadedfile">
                                                            </div>
                                                            <label class="col-form-label text-left col-lg-3 col-sm-12"></label>
                                                            Keterangan :
                                                            <br/><label class="col-form-label text-left col-lg-3 col-sm-12"></label>
                                                            <span class="svg-icon svg-icon-success">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                                    <polygon points="0 0 24 0 24 24 0 24" />
                                                                                    <path d="M12.2928955,6.70710318 C11.9023712,6.31657888 11.9023712,5.68341391 12.2928955,5.29288961 C12.6834198,4.90236532 13.3165848,4.90236532 13.7071091,5.29288961 L19.7071091,11.2928896 C20.085688,11.6714686 20.0989336,12.281055 19.7371564,12.675721 L14.2371564,18.675721 C13.863964,19.08284 13.2313966,19.1103429 12.8242777,18.7371505 C12.4171587,18.3639581 12.3896557,17.7313908 12.7628481,17.3242718 L17.6158645,12.0300721 L12.2928955,6.70710318 Z" fill="#000000" fill-rule="nonzero" />
                                                                                    <path d="M3.70710678,15.7071068 C3.31658249,16.0976311 2.68341751,16.0976311 2.29289322,15.7071068 C1.90236893,15.3165825 1.90236893,14.6834175 2.29289322,14.2928932 L8.29289322,8.29289322 C8.67147216,7.91431428 9.28105859,7.90106866 9.67572463,8.26284586 L15.6757246,13.7628459 C16.0828436,14.1360383 16.1103465,14.7686056 15.7371541,15.1757246 C15.3639617,15.5828436 14.7313944,15.6103465 14.3242754,15.2371541 L9.03007575,10.3841378 L3.70710678,15.7071068 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(9.000003, 11.999999) rotate(-270.000000) translate(-9.000003, -11.999999)" />
                                                                            </g>
                                                                    </svg>
                                                                    <!--end::Svg Icon-->
                                                            </span>
                                                            Jenis File PDF
                                                            <br/><label class="col-form-label text-left col-lg-3 col-sm-12"></label>
                                                            <span class="svg-icon svg-icon-success">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                                    <polygon points="0 0 24 0 24 24 0 24" />
                                                                                    <path d="M12.2928955,6.70710318 C11.9023712,6.31657888 11.9023712,5.68341391 12.2928955,5.29288961 C12.6834198,4.90236532 13.3165848,4.90236532 13.7071091,5.29288961 L19.7071091,11.2928896 C20.085688,11.6714686 20.0989336,12.281055 19.7371564,12.675721 L14.2371564,18.675721 C13.863964,19.08284 13.2313966,19.1103429 12.8242777,18.7371505 C12.4171587,18.3639581 12.3896557,17.7313908 12.7628481,17.3242718 L17.6158645,12.0300721 L12.2928955,6.70710318 Z" fill="#000000" fill-rule="nonzero" />
                                                                                    <path d="M3.70710678,15.7071068 C3.31658249,16.0976311 2.68341751,16.0976311 2.29289322,15.7071068 C1.90236893,15.3165825 1.90236893,14.6834175 2.29289322,14.2928932 L8.29289322,8.29289322 C8.67147216,7.91431428 9.28105859,7.90106866 9.67572463,8.26284586 L15.6757246,13.7628459 C16.0828436,14.1360383 16.1103465,14.7686056 15.7371541,15.1757246 C15.3639617,15.5828436 14.7313944,15.6103465 14.3242754,15.2371541 L9.03007575,10.3841378 L3.70710678,15.7071068 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(9.000003, 11.999999) rotate(-270.000000) translate(-9.000003, -11.999999)" />
                                                                            </g>
                                                                    </svg>
                                                                    <!--end::Svg Icon-->
                                                            </span>Ukuran File maksimum 5 Mb
                                                            <br/><br/>
                                                            <div class="modal-footer">
                                                                <input type="submit" value="Simpan" class="btn btn-primary" >
                                                                <button type="button" class="btn btn-default" data-dismiss="modal" style="background-color:#ddd;">Tutup</button>
                                                            </div>
                                                            </div>
                                                        </div>
                                                    </form>    
                                                </div>
                                            </div>
                                        </div>
                                        <!--end::Modal Edit Luaran-->
                                        
                                    </div>
                                </div>
                            </div>
                            <!--end::Container-->
                        </div>
                        <!--end::Entry-->
                    </div>
                    <!--end::Content-->
                    <?php include 'v_footer.php'; ?>
                </div>
                <!--end::Wrapper-->
            </div>
            <!--end::Page-->
        </div>
        <!--end::Main-->
        <?php include 'v_panel.php'; ?>
        <!--begin::Scrolltop-->
        <div id="kt_scrolltop" class="scrolltop">
            <span class="svg-icon">
                <!--begin::Svg Icon | path:assets/media/svg/icons/Navigation/Up-2.svg-->
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <polygon points="0 0 24 0 24 24 0 24" />
                <rect fill="#000000" opacity="0.3" x="11" y="10" width="2" height="10" rx="1" />
                <path d="M6.70710678,12.7071068 C6.31658249,13.0976311 5.68341751,13.0976311 5.29289322,12.7071068 C4.90236893,12.3165825 4.90236893,11.6834175 5.29289322,11.2928932 L11.2928932,5.29289322 C11.6714722,4.91431428 12.2810586,4.90106866 12.6757246,5.26284586 L18.6757246,10.7628459 C19.0828436,11.1360383 19.1103465,11.7686056 18.7371541,12.1757246 C18.3639617,12.5828436 17.7313944,12.6103465 17.3242754,12.2371541 L12.0300757,7.38413782 L6.70710678,12.7071068 Z" fill="#000000" fill-rule="nonzero" />
                </g>
                </svg>
                <!--end::Svg Icon-->
            </span>
        </div>
        <!--end::Scrolltop-->
        <script>var HOST_URL = "/metronic/theme/html/tools/preview";</script>
        <!--begin::Global Config(global config for global JS scripts)-->
        <script>var KTAppSettings = { "breakpoints": { "sm": 576, "md": 768, "lg": 992, "xl": 1200, "xxl": 1200 }, "colors": { "theme": { "base": { "white": "#ffffff", "primary": "#6993FF", "secondary": "#E5EAEE", "success": "#1BC5BD", "info": "#8950FC", "warning": "#FFA800", "danger": "#F64E60", "light": "#F3F6F9", "dark": "#212121" }, "light": { "white": "#ffffff", "primary": "#E1E9FF", "secondary": "#ECF0F3", "success": "#C9F7F5", "info": "#EEE5FF", "warning": "#FFF4DE", "danger": "#FFE2E5", "light": "#F3F6F9", "dark": "#D6D6E0" }, "inverse": { "white": "#ffffff", "primary": "#ffffff", "secondary": "#212121", "success": "#ffffff", "info": "#ffffff", "warning": "#ffffff", "danger": "#ffffff", "light": "#464E5F", "dark": "#ffffff" } }, "gray": { "gray-100": "#F3F6F9", "gray-200": "#ECF0F3", "gray-300": "#E5EAEE", "gray-400": "#D6D6E0", "gray-500": "#B5B5C3", "gray-600": "#80808F", "gray-700": "#464E5F", "gray-800": "#1B283F", "gray-900": "#212121" } }, "font-family": "Poppins" };</script>
        <!--end::Global Config-->
        <!--begin::Global Theme Bundle(used by all pages)-->
        <script src=<?php echo base_url() . "dist/assets/plugins/global/plugins.bundle.js?v=7.2.8" ?>></script>
        <script src=<?php echo base_url() . "dist/assets/plugins/custom/prismjs/prismjs.bundle.js?v=7.2.8" ?>></script>
        <script src=<?php echo base_url() . "dist/assets/js/scripts.bundle.js?v=7.2.8" ?>></script>
        <!--end::Global Theme Bundle-->
        <!--begin::Page Vendors(used by this page)-->
        <script src=<?php echo base_url() . "dist/assets/plugins/custom/datatables/datatables.bundle.js" ?>></script>
        <!--end::Page Vendors-->
        <!--begin::Page Scripts(used by this page)-->
        <script src=<?php echo base_url() . "dist/assets/js/pages/crud/forms/widgets/select2.js" ?>></script>
        <script src=<?php echo base_url() . "dist/assets/js/pages/crud/file-upload/dropzonejs.js" ?>></script>
        <script src=<?php // echo base_url() . "dist/assets/js/pages/crud/ktdatatable/base/html-table-usulan.js" ?>></script>
        <script src=<?php // echo base_url() . "dist/assets/js/pages/crud/datatables/data-sources/html.js" ?>></script>
        <!--end::Page Scripts-->
        <script type="text/javascript">
            var KTDatatablesDataSourceHtml = function() {

                    var initTable1 = function() {
                            var table = $('#kt_datatable');

                            // begin first table
                            table.DataTable({
                                    responsive: true,
                                    columnDefs: [
//                                            {
//                                                    targets: -1,
//                                                    title: 'Actions',
//                                                    orderable: false,
//                                                    render: function(data, type, full, meta) {
//                                                            return '\
//                                                                    <div class="dropdown dropdown-inline">\
//                                                                            <a href="javascript:;" class="btn btn-sm btn-clean btn-icon" data-toggle="dropdown">\
//                                                    <i class="la la-cog"></i>\
//                                                </a>\
//                                                                            <div class="dropdown-menu dropdown-menu-sm dropdown-menu-right">\
//                                                                                    <ul class="nav nav-hoverable flex-column">\
//                                                                                    <li class="nav-item"><a class="nav-link" href="#"><i class="nav-icon la la-edit"></i><span class="nav-text">Edit Details</span></a></li>\
//                                                                                    <li class="nav-item"><a class="nav-link" href="#"><i class="nav-icon la la-leaf"></i><span class="nav-text">Update Status</span></a></li>\
//                                                                                    <li class="nav-item"><a class="nav-link" href="#"><i class="nav-icon la la-print"></i><span class="nav-text">Print</span></a></li>\
//                                                                                    </ul>\
//                                                                            </div>\
//                                                                    </div>\
//                                                                    <a href="javascript:;" class="btn btn-sm btn-clean btn-icon" title="Edit details">\
//                                                                            <i class="la la-edit"></i>\
//                                                                    </a>\
//                                                                    <a href="javascript:;" class="btn btn-sm btn-clean btn-icon" title="Delete">\
//                                                                            <i class="la la-trash"></i>\
//                                                                    </a>\
//                                                            ';
//                                                    },
//                                            },
                                            {
                                                    targets: 6,
                                                    title: 'Dokumen',
                                                    orderable: false,
                                            },
                                            {
                                                    targets: 7,
                                                    title: 'Aksi',
                                                    orderable: false,
                                            },
                                            {
                                                    width: '20px',
                                                    title: 'Periode',
                                                    targets: 5,
                                                    render: function(data, type, full, meta) {
                                                            var status = {
                                                                <?php foreach($periode as $data): 
                                                                echo $data->idperiode.": { 'title' : '".$data->nama."'},";
                                                                endforeach; ?>
//                                                                    1: {'title': 'Pending', 'class': 'label-light-primary'},
//                                                                    2: {'title': 'Delivered', 'class': ' label-light-danger'},
//                                                                    3: {'title': 'Canceled', 'class': ' label-light-primary'},
//                                                                    4: {'title': 'Success', 'class': ' label-light-success'},
//                                                                    5: {'title': 'Info', 'class': ' label-light-info'},
//                                                                    6: {'title': 'Danger', 'class': ' label-light-danger'},
//                                                                    7: {'title': 'Warning', 'class': ' label-light-warning'},
                                                            };
                                                            if (typeof status[data] === 'undefined') {
                                                                    return data;
                                                            }
//                                                            return '<span class="label label-lg font-weight-bold' + status[data].class + ' label-inline">' + status[data].title + '</span>';
                                                            return status[data].title;
                                                    },
                                            },
                                            {
                                                    width: '75px',
                                                    title: 'Jenis Luaran',
                                                    targets: 3,
                                                    render: function(data, type, full, meta) {
                                                            var status = {
                                                                <?php foreach($jenisfile as $data): 
                                                                echo $data->idjenis.": { 'title' : '".$data->namafile."'},";
                                                                endforeach; ?>
//                                                                    1: {'title': 'Online', 'state': 'danger'},
//                                                                    2: {'title': 'Retail', 'state': 'primary'},
//                                                                    3: {'title': 'Direct', 'state': 'success'},
                                                            };
                                                            if (typeof status[data] === 'undefined') {
                                                                    return data;
                                                            }
                                                            return status[data].title;
//                                                            return '<span class="label label-' + status[data].state + ' label-dot mr-2"></span>' +
//                                                                    '<span class="font-weight-bold text-' + status[data].state + '">' + status[data].title + '</span>';
                                                    },
                                            },
                                            
                                    ],
                            });

                    };

                    return {

                            //main function to initiate the module
                            init: function() {
                                    initTable1();
                            },

                    };

            }();

            jQuery(document).ready(function() {
                    KTDatatablesDataSourceHtml.init();
            });
//            var KTDatatableHtmlTableDemo = function() {
//            // Private functions
//
//                // demo initializer
//                var demo = function() {
//                    var datatable = $('#kt_datatable').KTDatatable({
//                        data: {
//                          saveState: {cookie: false},
//                        },
//                        search: {
//                          input: $('#kt_datatable_search_query'),
//                          key: 'generalSearch',
//                        },
//                        layout: {
//                          class: 'datatable-bordered',
//                        },
//                        columns: [
//    //                      {
//    //                        field: 'DepositPaid',
//    //                        type: 'number',
//    //                      },
//    //                      {
//    //                        field: 'OrderDate',
//    //                        type: 'date',
//    //                        format: 'YYYY-MM-DD',
//    //                      }, 
//                          {
//                            field: 'Periode',
//                            title: 'Field #6',
//                            autoHide: false,
//                            // callback function support for column rendering
//                            template: function(row) {
//                              var status = {
//                                  <?php foreach($periode as $data): 
                                   echo $data->idperiode.": { 'title' : '".$data->nama."'},";
                                   endforeach; ?>//
//                              };
//                              return status[row.Periode].title;
//    //                          return '<span class="label font-weight-bold label-lg' + status[row.Status].class + ' label-inline">' + status[row.Status].title + '</span>';
//                            },
//                          }, 
//                          {
//                            field: 'Luaran',
//                            title: 'Field #4',
//                            autoHide: false,
//                            // callback function support for column rendering
//                            template: function(row) {
//                              var status = {
//                                  <?php foreach($jenisfile as $data): 
                                   echo $data->idjenis.": { 'title' : '".$data->namafile."'},";
                                   endforeach; ?>//
//                              };
//                              return status[row.Luaran].title;
//                            },
//                          }, 
//                        ],
//                      });
//
//                      $('#kt_datatable_search_status').on('change', function() {
//                        datatable.search($(this).val().toLowerCase(), 'Luaran');
//                      });
//
//                      $('#kt_datatable_search_type').on('change', function() {
//                        datatable.search($(this).val().toLowerCase(), 'Periode');
//                    });
//                    $('#kt_datatable_search_status, #kt_datatable_search_type').selectpicker();
//                };
//
//                return {
//                  // Public functions
//                  init: function() {
//                    // init dmeo
//                    demo();
//                  },
//                };
//            }();
//
//            jQuery(document).ready(function() {
//              KTDatatableHtmlTableDemo.init();
//            });
            
            $(document).ready(function(){
                $('body').on('change','#kt_datatable_search_periode', function() {
                    var fd = new FormData();
                    var id = this.value
                    
                    fd.append('id',id);
                    // AJAX request
                    $.ajax({
                        url: '<?php echo base_url('index.php/c_admin_luaran/setperiode') ?>',
                        type: 'post',
                        data: fd,
                        contentType: false,
                        processData: false,
                        success: function(response){
                            window.location='<?php echo base_url() . "index.php/c_admin_luaran"; ?>';
                        }
                    });
                    e.preventDefault(); 
                });
                $('body').on('change','#kt_datatable_search_jenis', function() {
                    var fd = new FormData();
                    var id = this.value
                    
                    fd.append('id',id);
                    // AJAX request
                    $.ajax({
                        url: '<?php echo base_url('index.php/c_admin_luaran/setjenis') ?>',
                        type: 'post',
                        data: fd,
                        contentType: false,
                        processData: false,
                        success: function(response){
                            window.location='<?php echo base_url() . "index.php/c_admin_luaran"; ?>';
                        }
                    });
                    e.preventDefault(); 
                });
                $(document).on("click", ".luaranbaru", function () {
                    $('#Modalluaranbaru').modal('show');
                });
                $(document).on("click", ".unggahfile", function () {
                    var idusulan = $(this).attr('data');
                    $('#Modalunggahfile').modal('show');
                    $('[name="idusulan"]').val(idusulan);
                });
                $('#file_baru').change(function(e){
                    var fileName = e.target.files[0].name;
                    document.getElementById('display').innerHTML=fileName;
                });
                $('#file_edit').change(function(e){
                    var fileName = e.target.files[0].name;
                    document.getElementById('display_edit').innerHTML=fileName;
                    $('[name="uploadedfile"]').val(fileName);                    
                });
                $('#formtambahluaran').submit(function(e){
                    e.preventDefault(); 
                         $.ajax({
                             url:'<?php echo base_url();?>index.php/c_admin_luaran/uploadluaran', //URL submit
                             type:"post", //method Submit
                             data:new FormData(this), //penggunaan FormData
                             processData:false,
                             contentType:false,
                             cache:false,
                             async:false,
                              success: function(response){
                                    if(response != 0){
                                        swal.fire({title: "Berhasil", text: "Luaran berhasil disimpan.", icon: "success",buttonsStyling:true, confirmButtonText: "OK"},
                                            ).then(function() {
                                                location.reload();
                                        });    
                                    }else{
                                        swal.fire({title: "Oops...", text: "Luaran gagal disimpan", icon: "error",buttonsStyling:true, confirmButtonText: "OK"},
                                        );
                                    }
                                }
                         });
                });
                $(document).on("click", ".item_edit", function () {
                      var idfile = $(this).attr('data');
                      $.ajax({
                          type: "GET",
                          url: "<?php echo base_url('index.php/c_admin_luaran/getluaran') ?>",
                          dataType: "JSON",
                          data: {idfile: idfile},
                          success: function (data) {
                              $.each(data, function (idfile, idusulan, idjenis, judulluaran, keterangan, luaran) {
                                  $('#Modaleditluaran').modal('show');
                                  $('[name="idfile_edit"]').val(data.idfile);
                                  $('[name="idusulan_edit"]').val(data.idusulan);
                                  $('[name="idjenis_edit"]').val(data.idjenis);
                                  $('[name="judulluaran_edit"]').val(data.judulluaran);
                                  $('[name="keterangan_edit"]').val(data.keterangan);
                                  $('[name="luaran_edit"]').val(data.luaran);
//                                  $('[name="file_edit"]').val(data.fileloc);
                                  
                              });
                          }
                      });
                      return false;
                  });
                $('#formueditluaran').submit(function(e){
                    e.preventDefault(); 
                         $.ajax({
                             url:'<?php echo base_url();?>index.php/c_admin_luaran/editluaran', //URL submit
                             type:"post", //method Submit
                             data:new FormData(this), //penggunaan FormData
                             processData:false,
                             contentType:false,
                             cache:false,
                             async:false,
                              success: function(response){
                                    if(response != 0){
                                        swal.fire({title: "Berhasil", text: "Luaran berhasil disimpan.", icon: "success",buttonsStyling:true, confirmButtonText: "OK"},
                                            ).then(function() {
                                                location.reload();
                                        });    
                                    }else{
                                        swal.fire({title: "Oops...", text: "Luaran gagal disimpan", icon: "error",buttonsStyling:true, confirmButtonText: "OK"},
                                        );
                                    }
                                }
                         });
                });
                $(document).on("click", ".item_hapus", function() {
                    var id = $(this).attr('data');                    
                    Swal.fire({
                        title: "Hapus Luaran",
                        text: "Apakah anda yakin akan menghapus luaran penelitian/pengabdian ini ?",
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonText: "Ya, hapus",
                        cancelButtonText: "Tidak, batalkan",
                        reverseButtons: true
                    }).then(function (result) {
                            if (result.value) {
                                $.ajax({
                                    type: "POST",
                                    url: "<?php echo base_url() . "index.php/c_admin_luaran/hapusluaran"; ?>",
                                    dataType: "JSON",
                                    data: {id: id},
                                    success: function(response) {
                                        if(response != 0){
                                            $("tr[data-id='" + id + "']").fadeOut("fast", function() {
                                                $(this).remove();
                                            });
                                            Swal.fire(
                                                "Terhapus",
                                                "Luaran Penelitian/Pengabdian telah terhapus",
                                                "success"
                                            ).then(function() {
                                                    location.reload();
                                            });    
                                        }else{
                                            Swal.fire({title: "Oops...", text: "Luaran Penelitian/Pengabdian gagal dihapus.", icon: "error",buttonsStyling:true, confirmButtonText: "OK"},
                                                function(){ 
                                                    location.reload();
                                                }
                                             );
                                        }    
                                    }
                                });
                            } else if (result.dismiss === 'cancel') {
                                Swal.fire(
                                        'Dibatalkan',
                                        'Aksi hapus dibatalkan.',
                                        'error'
                                )
                            }
                    });

                });  
                
            }); 
        </script>
    </body>
    <!--end::Body-->
</html>